
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2. Getting started &#8212; Transcrypt 3.7.15 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Special facilities" href="special_facilities.html" />
    <link rel="prev" title="1. Transcrypt: what and why" href="what_why.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="special_facilities.html" title="3. Special facilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="what_why.html" title="1. Transcrypt: what and why"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Transcrypt 3.7.15 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<h1>2. Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>2.1. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Transcrypt is currently tested under Windows, Linux and OSX, with Chrome, Internet Explorer and Firefox. To be able to use it, Python 3.7 has to be installed. After that, install <em>virtualenv</em> as explained in <a class="reference external" href="https://www.dabapps.com/blog/introduction-to-pip-and-virtualenv-python/">Jamie Matthews very clear and brief introduction</a>. Be sure to install virtualenv for the right Python version, by using the right <em>pip</em>. For each Transcrypt project (or group of projects using the same Transcrypt version) create an environment as described in the referenced introduction. To install Trancrypt into that environment, <em>activate</em> the environment as also described there, and then type:</p>
<p><em>pip install transcrypt</em></p>
<p>from the command prompt. This is the recommended way to install Transcrypt. It is flexible and sets the proper access rights.</p>
<p>Alternatively, for manual installation under Windows or Linux, follow the steps below:</p>
<ol class="arabic simple">
<li>Download the Transcrypt zip and unpack it anywhere you like</li>
<li>Add <em>../Transcrypt-&lt;version&gt;/transcrypt</em> to your system path</li>
</ol>
<p>To enable minification, additionally the Java Runtime Environment 6 or later has to be installed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you install Transcrypt manually, Trancrypt is started by typing <em>run_transcrypt</em> rather than <em>transcrypt</em>. This allows a pip installed Transcrypt and a manually installed Transcrypt to be used side by side selectively.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you also use Numscrypt under Linux or OSX, use the MiniConda installer rather than <em>virtualenv</em>, as described in the Numscrypt documentation, since it will allow you to obtain the right version of NumPy.</p>
</div>
<p>You can test your installation as follows (replacing <em>transcrypt</em> by <em>run_transcrypt</em> if you installed manually rather than with pip):</p>
<ol class="arabic simple">
<li>Go to directory <em>../Transcrypt-&lt;version&gt;/transcrypt/development/automated_tests/transcrypt</em></li>
<li>From the command prompt run <em>transcrypt -b -c -da autotest</em>. This will compile the autotests into a number of .js files and put them into the <em>__target__</em> subdirectory. Do NOT go to that directory (there’s no need, stay where you went at point 4)</li>
<li>From the command prompt run <em>transcrypt -r -c autotest</em>. This will run the autotests with CPython creating file <em>autotest.html</em> that refers to the generated <em>autotest.js</em> file</li>
<li>Start a http server from the command prompt by typing  <em>python -m http.server</em>, or, dependent on your installation <em>python3 -m http.server</em>. In the address bar of your browser, type <em>localhost:8000/animals.html</em>. This will load the autotest, run it and compare the output with what was generated by CPython. It should report no errors</li>
</ol>
<p>To experiment with Transcrypt yourself:</p>
<ol class="arabic simple">
<li>Create a directory for your experiments</li>
<li>Make your own thing there, e.g. <em>experiment1.py</em></li>
<li>Compile with <em>transcrypt -b experiment1</em></li>
<li>Make an HTML page that will load your code in the browser. Use the HTML file generated by the autotest as an example of how to do that</li>
<li>Load and run the HTML + JS in the same way as indicated earlier.</li>
</ol>
<p>You may also want to try the demo’s.</p>
<div class="section" id="installation-troubleshooting-checklist">
<h3>2.1.1. Installation troubleshooting checklist<a class="headerlink" href="#installation-troubleshooting-checklist" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Transcrypt was installed using <em>pip</em>, but <em>import transcrypt</em> fails. Transcrypt isn’t a library but a compiler. Install and run it as described in this chapter.</li>
<li>Transcrypt reports an error containing the word ‘java’. Transcrypt produces both prettyfied and minified JavaScript output. For the minification it makes use of the Google Closure Compiler, which is included in the distribution and requires Java to run. You can check proper installation of Java by typing the word <em>java</em> on the command line. This should give you a list of options: <em>Usage: java [-options] class []args…]</em> and so on. If you can’t or won’t install Java, you can run Transcrypt without minification by using the <em>-n</em> command line switch.</li>
<li>The static checker doesn’t find all errors it could. The static checks, performed by the PyFlakes package that’s part of the distribution, are of a ‘light’ variety. Style checks and false positives are avoided. The accent is on finding undefined identifiers and unused variables.</li>
</ol>
</div>
</div>
<div class="section" id="your-first-transcrypt-program">
<h2>2.2. Your first Transcrypt program<a class="headerlink" href="#your-first-transcrypt-program" title="Permalink to this headline">¶</a></h2>
<p>Open a command prompt in the <em>demos/hello</em> directory and type <em>transcrypt hello</em>.
Then start a http server from the command prompt by typing <em>python -m http.server</em> or <em>python3 -m http.server</em>, dependent on your installation and type <em>localhost:8000/hello</em> in the address bar to load the result into your browser.</p>
<p>After clicking on both buttons a few times, take a look at <em>hello.html</em>.
As you can see, eventhandlers are connected to the buttons exactly as you would do with JavaScript.</p>
<p>Then look at <em>hello.py</em>.
Note that JavaScript functions like document.getElementById can be called from Python exactly as you would call them from JavaScript, but with Python data.</p>
<p>The minified JavaScript files <em>including the Transcrypt runtime</em> are only around 50kB. With non-trivial programs this overhead becomes negligible. Transcrypt applications in themselves don’t need any external files. Of course you can use extensive JavaScript libraries served by content delivery networks as you normally would. But you can also make very compact stand alone applications. The most efficient thing to do is pack all functionality for a page in a single Transcrypt program. Note that the source can consist of many modules if needed and many callback entrypoints can be provided. But it is <em>one</em> stateful application, just like it would be on the desktop.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">In hello.html, Python handlers are attached directly to the onclick events</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;script type=&quot;module&quot;&gt;import * as hello from &#39;./__target__/hello.js&#39;; window.hello = hello;&lt;/script&gt;
&lt;h2&gt;Hello demo&lt;/h2&gt;

&lt;p&gt;
&lt;div id = &quot;greet&quot;&gt;...&lt;/div&gt;
&lt;button onclick=&quot;hello.solarSystem.greet ()&quot;&gt;Click me repeatedly!&lt;/button&gt;

&lt;p&gt;
&lt;div id = &quot;explain&quot;&gt;...&lt;/div&gt;
&lt;button onclick=&quot;hello.solarSystem.explain ()&quot;&gt;And click me repeatedly too!&lt;/button&gt;
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">In hello.py, JavaScript function document.getElementById is called directly from Python, using plain Python values</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">chain</span>

<span class="k">class</span> <span class="nc">SolarSystem</span><span class="p">:</span>
    <span class="n">planets</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span> <span class="p">(</span><span class="n">chain</span> <span class="p">(</span><span class="n">planet</span><span class="p">,</span> <span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,)))</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">planet</span> <span class="ow">in</span> <span class="nb">enumerate</span> <span class="p">((</span>
        <span class="p">(</span><span class="s1">&#39;Mercury&#39;</span><span class="p">,</span> <span class="s1">&#39;hot&#39;</span><span class="p">,</span> <span class="mi">2240</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Venus&#39;</span><span class="p">,</span> <span class="s1">&#39;sulphurous&#39;</span><span class="p">,</span> <span class="mi">6052</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Earth&#39;</span><span class="p">,</span> <span class="s1">&#39;fertile&#39;</span><span class="p">,</span> <span class="mi">6378</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Mars&#39;</span><span class="p">,</span> <span class="s1">&#39;reddish&#39;</span><span class="p">,</span> <span class="mi">3397</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Jupiter&#39;</span><span class="p">,</span> <span class="s1">&#39;stormy&#39;</span><span class="p">,</span> <span class="mi">71492</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Saturn&#39;</span><span class="p">,</span> <span class="s1">&#39;ringed&#39;</span><span class="p">,</span> <span class="mi">60268</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Uranus&#39;</span><span class="p">,</span> <span class="s1">&#39;cold&#39;</span><span class="p">,</span> <span class="mi">25559</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Neptune&#39;</span><span class="p">,</span> <span class="s1">&#39;very cold&#39;</span><span class="p">,</span> <span class="mi">24766</span><span class="p">)</span> 
    <span class="p">))]</span>
    
    <span class="n">lines</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is a </span><span class="si">{}</span><span class="s1"> planet&#39;</span><span class="p">,</span>
        <span class="s1">&#39;The radius of </span><span class="si">{}</span><span class="s1"> is </span><span class="si">{}</span><span class="s1"> km&#39;</span><span class="p">,</span>
        <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is planet nr. </span><span class="si">{}</span><span class="s1"> counting from the sun&#39;</span>
    <span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="nf">greet</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets</span> <span class="p">[</span><span class="nb">int</span> <span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">random</span> <span class="p">()</span> <span class="o">*</span> <span class="nb">len</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planets</span><span class="p">))]</span>
        <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span> <span class="p">(</span><span class="s1">&#39;greet&#39;</span><span class="p">)</span> <span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;Hello </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">explain</span> <span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">explain</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span> <span class="p">(</span><span class="s1">&#39;explain&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span><span class="p">]</span> <span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span>
        
<span class="n">solarSystem</span> <span class="o">=</span> <span class="n">SolarSystem</span> <span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="available-command-line-switches">
<span id="command-line-switches"></span><h2>2.3. Available command line switches<a class="headerlink" href="#available-command-line-switches" title="Permalink to this headline">¶</a></h2>
<p>The available command line switches will be shown if you run transcrypt -h.
They are specified in the source code of Transcrypt as follows:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Transcrypt command line switches as specified in module/orgs/transcrypt/utils.py</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CommandArgs</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">parse</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span> <span class="o">=</span> <span class="n">ArgumentParser</span> <span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;.py file containing source code of main module&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;--anno&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;annotate target files that were compiled from Python with source file names and source line numbers&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-am&#39;</span><span class="p">,</span> <span class="s1">&#39;--alimod&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;use aliasing for module paths&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-b&#39;</span><span class="p">,</span> <span class="s1">&#39;--build&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;rebuild all target files from scratch&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-c&#39;</span><span class="p">,</span> <span class="s1">&#39;--complex&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable complex number support, locally requires operator overloading&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s1">&#39;--docat&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable __doc__ attributes. Apply sparsely, since it will make docstrings part of the generated code&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-da&#39;</span><span class="p">,</span> <span class="s1">&#39;--dassert&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;debug: activate assertions&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-dc&#39;</span><span class="p">,</span> <span class="s1">&#39;--dcheck&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;debug: perform lightweight consistency check&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-de&#39;</span><span class="p">,</span> <span class="s1">&#39;--dextex&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;debug: show extended exception reports&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-dl&#39;</span><span class="p">,</span> <span class="s1">&#39;--dlog&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;debug: log compiler messages to disk&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-dm&#39;</span><span class="p">,</span> <span class="s1">&#39;--dmap&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;debug: dump human readable source map&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-dn&#39;</span><span class="p">,</span> <span class="s1">&#39;--dnostrip&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;debug: no comment stripping of __core__ and __builtin__ in-line modules&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-ds&#39;</span><span class="p">,</span> <span class="s1">&#39;--dstat&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;debug: validate static typing using annotations&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-dt&#39;</span><span class="p">,</span> <span class="s1">&#39;--dtree&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;debug: dump syntax tree&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-e&#39;</span><span class="p">,</span> <span class="s1">&#39;--esv&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;ecma script version of generated code, default = 6. The symbol __esv&lt;versionnr&gt;__ is added to the global symbol list, e.g. __esv7__.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-ec&#39;</span><span class="p">,</span> <span class="s1">&#39;--ecom&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable executable comments, seen as comments by CPython but as executable statements by Transcrypt&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;--fcall&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable fastcall mechanism by default. You can also use __pragma__ (&#39;fcal&#39;) and __pragma__ (</span><span class="se">\&#39;</span><span class="s2">nofcall</span><span class="se">\&#39;</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-g&#39;</span><span class="p">,</span> <span class="s1">&#39;--gen&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable generators and iterators. Disadvised, since it will result in a function call for each loop iteration. Preferably use __pragma__ (&#39;gen&#39;) and __pragma__ (&#39;nogen&#39;)&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--iconv&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable automatic conversion to iterable by default. Disadvised, since it will result in a type check for each for-loop. Preferably use __pragma__ (&#39;iconv&#39;) and __pragma__ (</span><span class="se">\&#39;</span><span class="s2">noiconv</span><span class="se">\&#39;</span><span class="s2">) to enable automatic conversion locally&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-jc&#39;</span><span class="p">,</span> <span class="s1">&#39;--jscall&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable native JavaScript calls for Python methods. This is fast, but doesn&#39;t support bound method assignment, decorators and non-instance methods. Preferably use __pragma__ (&#39;jscall&#39;) and __pragma__ (&#39;nojscall&#39;) to enable native JavaScript calls locally&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-jk&#39;</span><span class="p">,</span> <span class="s1">&#39;--jskeys&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;interpret {key: &#39;value&#39;} as {&#39;key&#39;: &#39;value&#39;} and forbid {key (): &#39;value&#39;}, as JavaScript does. Disadvised, since it&#39;s less flexible than the Python interpretation. Either follow Python semantics by using {&#39;key&#39;: &#39;value&#39;} explicitly if you want literal keys or use __pragma__ (&#39;jskeys&#39;) and __pragma__ (&#39;nojskeys&#39;) locally instead to make clear local deviation from Python semantics&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-jm&#39;</span><span class="p">,</span> <span class="s1">&#39;--jsmod&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;give </span><span class="si">%%</span><span class="s2"> and </span><span class="si">%%</span><span class="s2">= JavaScript rather than Python behaviour. Disadvised, since it deviates from the mathematical &#39;modulo&#39; operator. Either follow Python semantics or use __pragma__ (&#39;jsmod&#39;) and __pragma__ (&#39;nojsmod&#39;) locally instead to make clear local deviation.&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-k&#39;</span><span class="p">,</span> <span class="s1">&#39;--kwargs&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable keyword arguments by default. In general this is disadvised, use __pragma__ (&#39;kwargs&#39;) and __pragma__(&#39;nokwargs&#39;) locally instead to prevent bloated code&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-kc&#39;</span><span class="p">,</span> <span class="s1">&#39;--keycheck&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable checking for existence of dictionary keys. In general this is disadvised, use __pragma__ (&#39;keycheck&#39;) and __pragma__(&#39;nokeycheck&#39;) locally instead to prevent bloated code&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-l&#39;</span><span class="p">,</span> <span class="s1">&#39;--license&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;show license&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;--map&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;generate source map&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--nomin&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;no minification&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--opov&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable operator overloading by default. In general this is disadvised, use __pragma__ (&#39;opov&#39;) and __pragma__(&#39;noopov&#39;) locally instead to prevent slow code&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-p&#39;</span><span class="p">,</span> <span class="s1">&#39;--parent&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;object that will hold application, default is window. Use -p .none to generate orphan application, e.g. for use in node.js&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="s1">&#39;--run&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;run source file rather than compiling it&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s1">&#39;--symbols&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;names, joined by $, separately passed to main module in __symbols__ variable&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-sf&#39;</span><span class="p">,</span> <span class="s1">&#39;--sform&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable support for string formatting mini language&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-t&#39;</span><span class="p">,</span> <span class="s1">&#39;--tconv&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;enable automatic conversion to truth value by default. Disadvised, since it will result in a conversion for each boolean. Preferably use __pragma__ (&#39;tconv&#39;) and __pragma__ (</span><span class="se">\&#39;</span><span class="s2">notconv</span><span class="se">\&#39;</span><span class="s2">) to enable automatic conversion locally&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-u&#39;</span><span class="p">,</span> <span class="s1">&#39;--unit&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;compile to units rather than to monolithic application. Use -u .auto to autogenerate dynamically loadable native JavaScript modules, one per Python module. Use -u .run to generate the loader and the staticcally loadable runtime unit. Use -u .com to generate a statically loadable component unit.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;show all messages&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-x&#39;</span><span class="p">,</span> <span class="s1">&#39;--x&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;reserved for extended options&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-xr&#39;</span><span class="p">,</span> <span class="s1">&#39;--xreex&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;re-export all imported names&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-xg&#39;</span><span class="p">,</span> <span class="s1">&#39;--xglobs&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;allow use of the &#39;globals&#39; function&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-xp&#39;</span><span class="p">,</span> <span class="s1">&#39;--xpath&#39;</span><span class="p">,</span> <span class="n">nargs</span> <span class="o">=</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;additional module search paths, joined by $, #&#39;s will be replaced by spaces&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-xt&#39;</span><span class="p">,</span> <span class="s1">&#39;--xtiny&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;generate tiny version of runtime, a.o. lacking support for implicit and explicit operator overloading. Use only if generated code can be validated, since it will introduce semantic alterations in edge cases&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;-*&#39;</span><span class="p">,</span> <span class="s1">&#39;--star&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Like it? Grow it! Go to GitHub and then click [* Star]&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">projectOptions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">parse_args</span> <span class="p">()</span> <span class="o">.</span><span class="vm">__dict__</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projectOptions</span><span class="p">)</span>
        
        <span class="c1"># Signal invalid switches</span>
        
        <span class="k">def</span> <span class="nf">logAndExit</span> <span class="p">(</span><span class="n">message</span><span class="p">):</span>
            <span class="n">log</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="n">invalidCombi</span> <span class="o">=</span> <span class="s1">&#39;Invalid combination of options&#39;</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">star</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">):</span>
            <span class="n">logAndExit</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">format_usage</span> <span class="p">()</span> <span class="o">.</span><span class="n">capitalize</span> <span class="p">())</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">:</span>
            <span class="n">logAndExit</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">: -m / --map and -u / --unit&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="n">invalidCombi</span><span class="p">))</span>   
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;.com&#39;</span><span class="p">:</span>
            <span class="n">logAndExit</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">: -p / --parent and -u / --unit .com&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="n">invalidCombi</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">==</span> <span class="s1">&#39;.export&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">esv</span> <span class="ow">and</span> <span class="nb">int</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">esv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">logAndExit</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">: -p / --parent .export and -e / --esv &lt; 6&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="n">invalidCombi</span><span class="p">))</span>        
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;.auto&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">esv</span> <span class="ow">and</span> <span class="nb">int</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">esv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">logAndExit</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">: -u / --unit .auto and -e / --esv &lt; 6&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="n">invalidCombi</span><span class="p">))</span>
        
        <span class="c1"># Set dependent switches</span>
        
        <span class="c1"># (for future use)</span>
            
        <span class="c1"># Correcting line counts for source map</span>
            
        <span class="k">global</span> <span class="n">extraLines</span>
        <span class="n">extraLines</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1"># Make identifier __pragma__ known to static checker</span>
            <span class="c1"># It was only known in JavaScript from __core__.js, which the checker doesn&#39;t see</span>
            <span class="c1"># __ pragma__ (&#39;&lt;all&gt;&#39;) in JavaScript requires it to remain a function, as it was in the core</span>
            <span class="c1"># It can&#39;t be skipped, since it has to precede __pragma__ (&#39;skip&#39;), to make the checker accept that</span>
            <span class="s1">&#39;def __pragma__ (): pass&#39;</span><span class="p">,</span>
        
            <span class="c1"># Make __include__ known to the static checker</span>
            <span class="s1">&#39;__pragma__ (</span><span class="se">\&#39;</span><span class="s1">skip</span><span class="se">\&#39;</span><span class="s1">)&#39;</span><span class="p">,</span>            
            <span class="s1">&#39;__new__ = __include__ = 0&#39;</span><span class="p">,</span>    
            <span class="s1">&#39;__pragma__ (</span><span class="se">\&#39;</span><span class="s1">noskip</span><span class="se">\&#39;</span><span class="s1">)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;&#39;</span>
        <span class="p">]</span> <span class="k">if</span> <span class="n">commandArgs</span><span class="o">.</span><span class="n">dcheck</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="k">global</span> <span class="n">nrOfExtraLines</span>
        <span class="n">nrOfExtraLines</span> <span class="o">=</span> <span class="nb">max</span> <span class="p">(</span><span class="nb">len</span> <span class="p">(</span><span class="n">extraLines</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Last line only serves to force linefeed</span>
        <span class="n">extraLines</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span> <span class="p">(</span><span class="n">extraLines</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>If static checking is enabled, insert dummy definitions of global JavaScript variables between <a class="reference internal" href="special_facilities.html#skipping-fragments"><span class="std std-ref">__pragma__ (‘skip’) and __pragma__ (‘noskip’)</span></a> to prevent needless complaints of the checker. The static checks are geared towards avoiding false alarms, and mainly check undefined names and unused variables. Style checks are deliberately avoided.</p>
</div>
<div class="section" id="compiling-to-javascript-6">
<h2>2.4. Compiling to JavaScript 6<a class="headerlink" href="#compiling-to-javascript-6" title="Permalink to this headline">¶</a></h2>
<p>Transcrypt generates JavaScript 6, that is by default minimized by the Google Closure compiler. Since multilevel sourcemaps are provided, the minified code can be easily debugged, because it directly links back to the original Python sourcecode. Using the <em>-n</em> command line switch turns off minification and results in human readable JavaScript output.</p>
</div>
<div class="section" id="compiling-for-node-js">
<h2>2.5. Compiling for node.js<a class="headerlink" href="#compiling-for-node-js" title="Permalink to this headline">¶</a></h2>
<p>Transcrypt will allow you to target <em>node.js</em> while writing your server code in Python.
This opens up the exploding world of node.js libraries from your favorite programming language.
In the <em>demo/nodejs_demo</em> subdirectory of the installation, you’ll find the following trivial example of a node.js server app:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Using node.js from Transcrypt is trivial, including the use of ‘require’ to tap into a vast set of libraries</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compile with p. command line switch (see docs).</span>

<span class="kn">import</span> <span class="nn">time</span>

<span class="n">http</span> <span class="o">=</span> <span class="n">require</span> <span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Demo</span><span class="p">:</span>
    <span class="n">texts</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;Welcome to the world of node.js&#39;</span><span class="p">,</span>
        <span class="s1">&#39;You can have your cake and eat it&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Use node</span><span class="se">\&#39;</span><span class="s1">s ecosystem while programming in Python&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Using node.js from Transcrypt is easy&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Take a Python ride into the node.js world&#39;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Demo server started on port&#39;</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">createServer</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serve</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">listen</span> <span class="p">(</span><span class="n">port</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oldIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        
    <span class="k">def</span> <span class="nf">serve</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span> 
        <span class="n">time</span><span class="o">.</span><span class="n">__adapt__</span> <span class="p">(</span><span class="n">request</span><span class="p">)</span>
    
        <span class="n">response</span><span class="o">.</span><span class="n">writeHead</span> <span class="p">(</span><span class="mi">200</span><span class="p">)</span>
        
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Serving page&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">oldIndex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span> <span class="o">=</span> <span class="nb">int</span> <span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">random</span> <span class="p">()</span> <span class="o">*</span> <span class="nb">len</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oldIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span>
        
        <span class="n">response</span><span class="o">.</span><span class="n">end</span> <span class="p">(</span><span class="s1">&#39;&lt;h1&gt;</span><span class="si">{}</span><span class="s1">&lt;/h1&gt;&lt;h1&gt;</span><span class="si">{}</span><span class="s1">&lt;/h1&gt;&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">texts</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span><span class="p">],</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span> <span class="p">()</span>
        <span class="p">))</span>

<span class="n">demo</span> <span class="o">=</span> <span class="n">Demo</span> <span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">argv</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span>  <span class="c1">#This is where node puts its command line params</span>
</pre></div>
</div>
</div>
<p>Follow the steps below to run this demo:</p>
<ul class="simple">
<li>Install node.js from <em>https://nodejs.org</em></li>
<li>Open a node.js command prompt</li>
<li>Go to the <em>demo/nodejs_demo</em> directory</li>
<li>Compile the demo with <em>transcrypt -b -p .none nodejs_demo</em>, to generate an orphan module rather than a child of <em>window</em></li>
<li>Go to <em>demo/nodejs_demo/__target__</em> directory</li>
<li>Type <em>node nodejs_demo.js</em></li>
<li>In your browser, view the result at <em>http://localhost:8080</em></li>
<li>Repeatedly reload the page to see the text change (Google Chrome may actually reload twice)</li>
</ul>
</div>
<div class="section" id="using-sourcemaps-and-annotated-target-code">
<h2>2.6. Using sourcemaps and annotated target code<a class="headerlink" href="#using-sourcemaps-and-annotated-target-code" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sourcemaps">
<h3>2.6.1. Sourcemaps<a class="headerlink" href="#sourcemaps" title="Permalink to this headline">¶</a></h3>
<p>Sourcemaps enable debugging from the original Python source code rather then from the generated JavaScript. Transcrypt supports the use of single- and multi-level sourcemaps, using the <em>-m</em> switch. This means that you can source-level debug both non-minified and minified JavaScript target code. Sourcemaps are routinely tested for Google Chrome only, both under Windows and Linux, but they also have been observed to work for Firefox. Combined with the high readability of the JavaScript code generated by Transcrypt, this enables efficient debugging for real-world projects consisting of many modules.</p>
</div>
<div class="section" id="annotated-target-code">
<h3>2.6.2. Annotated target code<a class="headerlink" href="#annotated-target-code" title="Permalink to this headline">¶</a></h3>
<p>In addition to generating sourcemaps, you can use the <em>-a</em> switch to annotate non-minified JavaScript files with comments, referring to the original Python file names and line numbers. So even if your browser doesn’t support sourcemaps, it’s easy to find back the original Python source code location from any JavaScript statement.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Annotated target code for hello.py</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="o">============</span> <span class="n">Source</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">demos</span><span class="o">/</span><span class="n">hello</span><span class="o">/</span><span class="n">hello</span><span class="o">.</span><span class="n">py</span> <span class="o">============</span>

<span class="o">/*</span> <span class="mi">000001</span> <span class="o">*/</span>    <span class="p">(</span><span class="n">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="o">/*</span> <span class="mi">000001</span> <span class="o">*/</span>        <span class="n">var</span> <span class="n">chain</span> <span class="o">=</span> <span class="fm">__init__</span> <span class="p">(</span><span class="n">__world__</span><span class="o">.</span><span class="n">itertools</span><span class="p">)</span><span class="o">.</span><span class="n">chain</span><span class="p">;</span>
<span class="o">/*</span> <span class="mi">000003</span> <span class="o">*/</span>        <span class="n">var</span> <span class="n">SolarSystem</span> <span class="o">=</span> <span class="vm">__class__</span> <span class="p">(</span><span class="s1">&#39;SolarSystem&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nb">object</span><span class="p">],</span> <span class="p">{</span>
<span class="o">/*</span> <span class="mi">000021</span> <span class="o">*/</span>            <span class="n">get</span> <span class="fm">__init__</span> <span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="fm">__get__</span> <span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">function</span> <span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">{</span>
<span class="o">/*</span> <span class="mi">000022</span> <span class="o">*/</span>                <span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="o">/*</span> <span class="mi">000022</span> <span class="o">*/</span>            <span class="p">});},</span>
<span class="o">/*</span> <span class="mi">000024</span> <span class="o">*/</span>            <span class="n">get</span> <span class="n">greet</span> <span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="fm">__get__</span> <span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">function</span> <span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">{</span>
<span class="o">/*</span> <span class="mi">000025</span> <span class="o">*/</span>                <span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets</span> <span class="p">[</span><span class="nb">int</span> <span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">random</span> <span class="p">()</span> <span class="o">*</span> <span class="nb">len</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planets</span><span class="p">))];</span>
<span class="o">/*</span> <span class="mi">000026</span> <span class="o">*/</span>                <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span> <span class="p">(</span><span class="s1">&#39;greet&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;Hello </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="o">/*</span> <span class="mi">000027</span> <span class="o">*/</span>                <span class="bp">self</span><span class="o">.</span><span class="n">explain</span> <span class="p">();</span>
<span class="o">/*</span> <span class="mi">000027</span> <span class="o">*/</span>            <span class="p">});},</span>
<span class="o">/*</span> <span class="mi">000029</span> <span class="o">*/</span>            <span class="n">get</span> <span class="n">explain</span> <span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="fm">__get__</span> <span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">function</span> <span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">{</span>
<span class="o">/*</span> <span class="mi">000031</span> <span class="o">*/</span>                <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span> <span class="p">(</span><span class="s1">&#39;explain&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span><span class="p">]</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]);</span>
<span class="o">/*</span> <span class="mi">000033</span> <span class="o">*/</span>                <span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span><span class="p">;</span>
<span class="o">/*</span> <span class="mi">000033</span> <span class="o">*/</span>            <span class="p">});}</span>
<span class="o">/*</span> <span class="mi">000033</span> <span class="o">*/</span>        <span class="p">});</span>
<span class="o">/*</span> <span class="mi">000004</span> <span class="o">*/</span>        <span class="n">SolarSystem</span><span class="o">.</span><span class="n">planets</span> <span class="o">=</span> <span class="n">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="o">/*</span> <span class="mi">000004</span> <span class="o">*/</span>            <span class="n">var</span> <span class="n">__accu0__</span> <span class="o">=</span> <span class="p">[];</span>
<span class="o">/*</span> <span class="mi">000004</span> <span class="o">*/</span>            <span class="n">var</span> <span class="n">__iter0__</span> <span class="o">=</span> <span class="nb">enumerate</span> <span class="p">(</span><span class="nb">tuple</span> <span class="p">([</span><span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;Mercury&#39;</span><span class="p">,</span> <span class="s1">&#39;hot&#39;</span><span class="p">,</span> <span class="mi">2240</span><span class="p">]),</span> <span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;Venus&#39;</span><span class="p">,</span> <span class="s1">&#39;sulphurous&#39;</span><span class="p">,</span> <span class="mi">6052</span><span class="p">]),</span> <span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;Earth&#39;</span><span class="p">,</span> <span class="s1">&#39;fertile&#39;</span><span class="p">,</span> <span class="mi">6378</span><span class="p">]),</span> <span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;Mars&#39;</span><span class="p">,</span> <span class="s1">&#39;reddish&#39;</span><span class="p">,</span> <span class="mi">3397</span><span class="p">]),</span> <span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;Jupiter&#39;</span><span class="p">,</span> <span class="s1">&#39;stormy&#39;</span><span class="p">,</span> <span class="mi">71492</span><span class="p">]),</span> <span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;Saturn&#39;</span><span class="p">,</span> <span class="s1">&#39;ringed&#39;</span><span class="p">,</span> <span class="mi">60268</span><span class="p">]),</span> <span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;Uranus&#39;</span><span class="p">,</span> <span class="s1">&#39;cold&#39;</span><span class="p">,</span> <span class="mi">25559</span><span class="p">]),</span> <span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;Neptune&#39;</span><span class="p">,</span> <span class="s1">&#39;very cold&#39;</span><span class="p">,</span> <span class="mi">24766</span><span class="p">])]));</span>
<span class="o">/*</span> <span class="mi">000004</span> <span class="o">*/</span>            <span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">__index0__</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">__index0__</span> <span class="o">&lt;</span> <span class="n">__iter0__</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">__index0__</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="o">/*</span> <span class="mi">000012</span> <span class="o">*/</span>                <span class="n">var</span> <span class="n">__left0__</span> <span class="o">=</span> <span class="n">__iter0__</span> <span class="p">[</span><span class="n">__index0__</span><span class="p">];</span>
<span class="o">/*</span> <span class="mi">000012</span> <span class="o">*/</span>                <span class="n">var</span> <span class="n">index</span> <span class="o">=</span> <span class="n">__left0__</span> <span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="o">/*</span> <span class="mi">000012</span> <span class="o">*/</span>                <span class="n">var</span> <span class="n">planet</span> <span class="o">=</span> <span class="n">__left0__</span> <span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="o">/*</span> <span class="mi">000004</span> <span class="o">*/</span>                <span class="n">__accu0__</span><span class="o">.</span><span class="n">append</span> <span class="p">(</span><span class="n">chain</span> <span class="p">(</span><span class="n">planet</span><span class="p">,</span> <span class="nb">tuple</span> <span class="p">([</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])));</span>
<span class="o">/*</span> <span class="mi">000004</span> <span class="o">*/</span>            <span class="p">}</span>
<span class="o">/*</span> <span class="mi">000004</span> <span class="o">*/</span>            <span class="k">return</span> <span class="n">__accu0__</span><span class="p">;</span>
<span class="o">/*</span> <span class="mi">000004</span> <span class="o">*/</span>        <span class="p">}</span> <span class="p">();</span>
<span class="o">/*</span> <span class="mi">000015</span> <span class="o">*/</span>        <span class="n">SolarSystem</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="nb">tuple</span> <span class="p">([</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is a </span><span class="si">{}</span><span class="s1"> planet&#39;</span><span class="p">,</span> <span class="s1">&#39;The radius of </span><span class="si">{}</span><span class="s1"> is </span><span class="si">{}</span><span class="s1"> km&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is planet nr. </span><span class="si">{}</span><span class="s1"> counting from the sun&#39;</span><span class="p">]);</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>        <span class="n">var</span> <span class="n">solarSystem</span> <span class="o">=</span> <span class="n">SolarSystem</span> <span class="p">();</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>        <span class="n">__pragma__</span> <span class="p">(</span><span class="s1">&#39;&lt;use&gt;&#39;</span> <span class="o">+</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>            <span class="s1">&#39;itertools&#39;</span> <span class="o">+</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>        <span class="s1">&#39;&lt;/use&gt;&#39;</span><span class="p">)</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>        <span class="n">__pragma__</span> <span class="p">(</span><span class="s1">&#39;&lt;all&gt;&#39;</span><span class="p">)</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>            <span class="n">__all__</span><span class="o">.</span><span class="n">SolarSystem</span> <span class="o">=</span> <span class="n">SolarSystem</span><span class="p">;</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>            <span class="n">__all__</span><span class="o">.</span><span class="n">solarSystem</span> <span class="o">=</span> <span class="n">solarSystem</span><span class="p">;</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>        <span class="n">__pragma__</span> <span class="p">(</span><span class="s1">&#39;&lt;/all&gt;&#39;</span><span class="p">)</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>    <span class="p">})</span> <span class="p">();</span>
<span class="o">/*</span> <span class="mi">000035</span> <span class="o">*/</span>    <span class="k">return</span> <span class="n">__all__</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>Source code annotation only happens for Python sources, not for JavaScript-only modules, that have a trivial correspondence between non-minified target code and source code.</p>
</div>
</div>
<div class="section" id="static-type-validation">
<h2>2.7. Static type validation<a class="headerlink" href="#static-type-validation" title="Permalink to this headline">¶</a></h2>
<p>Static type validation is both a powerful method to catch a variety of bugs and a way to add clear, automatically checked documentation to your source code. Transcrypt includes an experimental version of <a class="reference external" href="http://mypy-lang.org/">Jukka Lehtosalo’s mypy static type validator</a> This validator uses <span class="raw-html"><a href="https://www.python.org/dev/peps/pep-0484/" target="_blank">type hints</a></span> to rigorously cross-check correct use of datatypes all through your application. To activate static type validation use the <em>-ds</em> switch. You can combine static type validation with lightweight consistency checking using both the <em>-ds</em> and <em>-dc</em> switches.</p>
<p>Below is an example of code with type hints and deliberate inconsistencies, and the output of both the static type validator and the lightweight consistency checker. As can be seen, many errors can be caught in this way.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">manual_tests/static_types/static_types.py</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># from org.transcrypt.stubs.browser import __pragma__</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Iterator</span> <span class="c1">#, List, Dict, ClassVar</span>

<span class="kn">import</span> <span class="nn">mod1</span>
<span class="kn">import</span> <span class="nn">mod2</span>

<span class="n">testVar</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mf">3.5</span>

<span class="k">def</span> <span class="nf">fib</span> <span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span> <span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="c1"># yield a</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
        
    <span class="k">return</span> <span class="mi">3</span>
        
<span class="k">def</span> <span class="nf">add</span> <span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
    
<span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">test</span> <span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;test&#39;</span>
        
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">__pragma__ (&#39;ifdef&#39;, &#39;__undefined__&#39;)   # Needed because Transcrypt imports are compile time</span>
<span class="sd">if &#39;__undefined__&#39; in __symbols__:      # Needed because CPython doesn&#39;t understand pragmas</span>

<span class="sd">    # Variable annotations</span>

<span class="sd">    aList: List [int] = []</span>

<span class="sd">    aString: str    # Note: no initial value!</span>

<span class="sd">    class aClass:</span>
<span class="sd">        aClassVar: ClassVar [Dict [str, int]] = {}</span>
<span class="sd">        </span>
<span class="sd">    aList = [1.1, 2.2]</span>
<span class="sd">    aString = 1000</span>
<span class="sd">    aClass.aClassVar = {&#39;aString&#39;, 3.14}</span>

<span class="sd">__pragma__ (&#39;endif&#39;)</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">manual_tests/static_types/mod1.py</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test</span> <span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mf">4.5</span>
    <span class="k">return</span> <span class="nb">str</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
    
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">manual_tests/static_types/mod2/__init__.py</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test</span> <span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">3</span>
    
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Results of the static type validation and the lightweight consistency check</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">shipment</span><span class="o">&gt;</span><span class="n">python37</span> <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">__main__</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">da</span> <span class="o">-</span><span class="n">sf</span> <span class="o">-</span><span class="n">de</span> <span class="o">-</span><span class="n">m</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="n">b</span> <span class="o">-</span><span class="n">ds</span> <span class="o">-</span><span class="n">dc</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">static_types</span> 

<span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">shipment</span><span class="o">&gt;</span><span class="n">call</span> <span class="n">D</span><span class="p">:</span>\<span class="n">python37</span>\<span class="n">python</span><span class="o">.</span><span class="n">exe</span> <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">__main__</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">da</span> <span class="o">-</span><span class="n">sf</span> <span class="o">-</span><span class="n">de</span> <span class="o">-</span><span class="n">m</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="n">b</span> <span class="o">-</span><span class="n">ds</span> <span class="o">-</span><span class="n">dc</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">static_types</span> 

<span class="n">Transcrypt</span> <span class="p">(</span><span class="n">TM</span><span class="p">)</span> <span class="n">Python</span> <span class="n">to</span> <span class="n">JavaScript</span> <span class="n">Small</span> <span class="n">Sane</span> <span class="n">Subset</span> <span class="n">Transpiler</span> <span class="n">Version</span> <span class="mf">3.7</span><span class="o">.</span><span class="mi">15</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="n">Geatec</span> <span class="n">Engineering</span><span class="o">.</span> <span class="n">License</span><span class="p">:</span> <span class="n">Apache</span> <span class="mf">2.0</span>


<span class="n">Performing</span> <span class="n">static</span> <span class="nb">type</span> <span class="n">validation</span> <span class="n">on</span> <span class="n">application</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">org</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">__runtime__</span><span class="o">.</span><span class="n">py</span>

<span class="n">Saving</span> <span class="n">target</span> <span class="n">code</span> <span class="ow">in</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">__target__</span><span class="o">/</span><span class="n">org</span><span class="o">.</span><span class="n">transcrypt</span><span class="o">.</span><span class="n">__runtime__</span><span class="o">.</span><span class="n">js</span>
<span class="n">Performing</span> <span class="n">static</span> <span class="nb">type</span> <span class="n">validation</span> <span class="n">on</span> <span class="n">application</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">static_types</span><span class="o">.</span><span class="n">py</span>
<span class="n">The</span> <span class="n">following</span> <span class="n">inconsistencies</span> <span class="n">were</span> <span class="n">found</span><span class="p">:</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">mod2</span>\<span class="fm">__init__</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">Incompatible</span> <span class="k">return</span> <span class="n">value</span> <span class="nb">type</span> <span class="p">(</span><span class="n">got</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">expected</span> <span class="s2">&quot;str&quot;</span><span class="p">)</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">mod1</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">Incompatible</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">assignment</span> <span class="p">(</span><span class="n">expression</span> <span class="n">has</span> <span class="nb">type</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span> <span class="n">variable</span> <span class="n">has</span> <span class="nb">type</span> <span class="s2">&quot;int&quot;</span><span class="p">)</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">mod1</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">Incompatible</span> <span class="k">return</span> <span class="n">value</span> <span class="nb">type</span> <span class="p">(</span><span class="n">got</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="n">expected</span> <span class="s2">&quot;int&quot;</span><span class="p">)</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">static_types</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">8</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">Incompatible</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">assignment</span> <span class="p">(</span><span class="n">expression</span> <span class="n">has</span> <span class="nb">type</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span> <span class="n">variable</span> <span class="n">has</span> <span class="nb">type</span> <span class="s2">&quot;int&quot;</span><span class="p">)</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">static_types</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">Incompatible</span> <span class="k">return</span> <span class="n">value</span> <span class="nb">type</span> <span class="p">(</span><span class="n">got</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">expected</span> <span class="s2">&quot;Iterator[int]&quot;</span><span class="p">)</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">static_types</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="k">return</span> <span class="n">value</span> <span class="n">expected</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">static_types</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="k">return</span> <span class="n">value</span> <span class="n">expected</span>
    

<span class="n">Checking</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">static_types</span><span class="o">.</span><span class="n">py</span>
    <span class="n">Internal</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">lightweight</span> <span class="n">consistency</span> <span class="n">checker</span><span class="p">,</span> <span class="n">remainder</span> <span class="n">of</span> <span class="n">module</span> <span class="n">skipped</span>
<span class="n">Performing</span> <span class="n">static</span> <span class="nb">type</span> <span class="n">validation</span> <span class="n">on</span> <span class="n">application</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">mod2</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="n">The</span> <span class="n">following</span> <span class="n">inconsistencies</span> <span class="n">were</span> <span class="n">found</span><span class="p">:</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">mod2</span>\<span class="fm">__init__</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">Incompatible</span> <span class="k">return</span> <span class="n">value</span> <span class="nb">type</span> <span class="p">(</span><span class="n">got</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">expected</span> <span class="s2">&quot;str&quot;</span><span class="p">)</span>
    

<span class="n">Saving</span> <span class="n">target</span> <span class="n">code</span> <span class="ow">in</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">__target__</span><span class="o">/</span><span class="n">mod2</span><span class="o">.</span><span class="n">js</span>
<span class="n">Performing</span> <span class="n">static</span> <span class="nb">type</span> <span class="n">validation</span> <span class="n">on</span> <span class="n">application</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">mod1</span><span class="o">.</span><span class="n">py</span>
<span class="n">The</span> <span class="n">following</span> <span class="n">inconsistencies</span> <span class="n">were</span> <span class="n">found</span><span class="p">:</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">mod1</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">Incompatible</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">assignment</span> <span class="p">(</span><span class="n">expression</span> <span class="n">has</span> <span class="nb">type</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span> <span class="n">variable</span> <span class="n">has</span> <span class="nb">type</span> <span class="s2">&quot;int&quot;</span><span class="p">)</span>
    <span class="n">D</span><span class="p">:</span>\<span class="n">activ_tosh</span>\<span class="n">geatec</span>\<span class="n">transcrypt</span>\<span class="n">qquick</span>\<span class="n">Transcrypt</span>\<span class="n">transcrypt</span>\<span class="n">development</span>\<span class="n">manual_tests</span>\<span class="n">static_types</span>\<span class="n">mod1</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">Incompatible</span> <span class="k">return</span> <span class="n">value</span> <span class="nb">type</span> <span class="p">(</span><span class="n">got</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="n">expected</span> <span class="s2">&quot;int&quot;</span><span class="p">)</span>
    

<span class="n">Performing</span> <span class="n">lightweight</span> <span class="n">consistency</span> <span class="n">check</span> <span class="n">on</span> <span class="n">module</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">mod1</span><span class="o">.</span><span class="n">py</span>
    <span class="n">Line</span> <span class="mi">3</span><span class="p">:</span> <span class="n">local</span> <span class="n">variable</span> <span class="s1">&#39;a&#39;</span> <span class="ow">is</span> <span class="n">assigned</span> <span class="n">to</span> <span class="n">but</span> <span class="n">never</span> <span class="n">used</span>

<span class="n">Saving</span> <span class="n">target</span> <span class="n">code</span> <span class="ow">in</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">__target__</span><span class="o">/</span><span class="n">mod1</span><span class="o">.</span><span class="n">js</span>
<span class="n">Performing</span> <span class="n">static</span> <span class="nb">type</span> <span class="n">validation</span> <span class="n">on</span> <span class="n">application</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">typing</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

<span class="n">Saving</span> <span class="n">target</span> <span class="n">code</span> <span class="ow">in</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">__target__</span><span class="o">/</span><span class="n">typing</span><span class="o">.</span><span class="n">js</span>
<span class="n">Saving</span> <span class="n">target</span> <span class="n">code</span> <span class="ow">in</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">activ_tosh</span><span class="o">/</span><span class="n">geatec</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">qquick</span><span class="o">/</span><span class="n">Transcrypt</span><span class="o">/</span><span class="n">transcrypt</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">manual_tests</span><span class="o">/</span><span class="n">static_types</span><span class="o">/</span><span class="n">__target__</span><span class="o">/</span><span class="n">static_types</span><span class="o">.</span><span class="n">js</span>

<span class="n">Ready</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="getting-help-and-giving-feedback">
<h2>2.8. Getting help and giving feedback<a class="headerlink" href="#getting-help-and-giving-feedback" title="Permalink to this headline">¶</a></h2>
<p>If you have coding questions with regard to Transcrypt applications, the best place to ask for help is <a class="reference external" href="http://stackoverflow.com/questions/tagged/transcrypt/">StackOverflow (tag: Transcrypt)</a>. For bugs and feature requests use the <a class="reference external" href="https://github.com/QQuick/Transcrypt/issues">Transcrypt issue list on GitHub</a>. For any matters with regard to Transcrypt you’d like to ask or discuss you can also send a email to <a class="reference external" href="mailto:info&#37;&#52;&#48;transcrypt&#46;org">info<span>&#64;</span>transcrypt<span>&#46;</span>org</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_sphinx.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Subjects</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Getting started</a><ul>
<li><a class="reference internal" href="#installation">2.1. Installation</a><ul>
<li><a class="reference internal" href="#installation-troubleshooting-checklist">2.1.1. Installation troubleshooting checklist</a></li>
</ul>
</li>
<li><a class="reference internal" href="#your-first-transcrypt-program">2.2. Your first Transcrypt program</a></li>
<li><a class="reference internal" href="#available-command-line-switches">2.3. Available command line switches</a></li>
<li><a class="reference internal" href="#compiling-to-javascript-6">2.4. Compiling to JavaScript 6</a></li>
<li><a class="reference internal" href="#compiling-for-node-js">2.5. Compiling for node.js</a></li>
<li><a class="reference internal" href="#using-sourcemaps-and-annotated-target-code">2.6. Using sourcemaps and annotated target code</a><ul>
<li><a class="reference internal" href="#sourcemaps">2.6.1. Sourcemaps</a></li>
<li><a class="reference internal" href="#annotated-target-code">2.6.2. Annotated target code</a></li>
</ul>
</li>
<li><a class="reference internal" href="#static-type-validation">2.7. Static type validation</a></li>
<li><a class="reference internal" href="#getting-help-and-giving-feedback">2.8. Getting help and giving feedback</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="what_why.html"
                        title="previous chapter">1. Transcrypt: what and why</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="special_facilities.html"
                        title="next chapter">3. Special facilities</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation_use.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="special_facilities.html" title="3. Special facilities"
             >next</a> |</li>
        <li class="right" >
          <a href="what_why.html" title="1. Transcrypt: what and why"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Transcrypt 3.7.15 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Jacques de Hooge.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.8.
    </div>
  </body>
</html>